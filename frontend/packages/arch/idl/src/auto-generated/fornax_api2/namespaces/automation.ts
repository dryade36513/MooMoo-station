/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

import * as flow_devops_evaluation_task from './flow_devops_evaluation_task';

export type Int64 = string | number;

export enum ApplyStatus {
  Pending = 1,
  Approved = 2,
  Rejected = 3,
  Canceled = 4,
}

export enum BuiltinSpanFilterType {
  Undefined = 0,
  /** 業務含義(區別於 Trace Root)上的根節點 */
  BizRootSpan = 1,
  /** 模型 span */
  LLMSpan = 2,
  /** 非內置過濾 */
  CustomSpan = 3,
}

/** Schedule */
export enum ExecutePeriodic {
  Undefined = 0,
  Everyday = 1,
  Workdays = 2,
  Weekends = 3,
  Monday = 4,
  Tuesday = 5,
  Wednesday = 6,
  Thursday = 7,
  Friday = 8,
  Saturday = 9,
  Sunday = 10,
}

/** 比較算子 */
export enum FilterCmpOp {
  Undefined = 0,
  /** greater than */
  GT = 1,
  /** greater than or equal */
  GTE = 2,
  /** less than */
  LT = 3,
  /** less than or equal */
  LTE = 4,
  In = 5,
  NotIn = 6,
  /** equal */
  Eq = 7,
  /** not equal */
  NEq = 8,
  Like = 9,
  NotLike = 10,
  /** 有該 tag */
  Exists = 11,
  /** 沒有該 tag */
  NotExists = 12,
}

/** 邏輯算子 */
export enum FilterLogicOp {
  Undefined = 0,
  Nop = 1,
  And = 2,
  Or = 3,
  Not = 4,
}

export enum ObjectType {
  Undefined = 0,
  CozeBot = 1,
  FornaxPSM = 2,
  Prompt = 3,
  Doubao = 4,
  FornaxAgent = 5,
}

export enum SecurityLevel {
  L4 = 4,
}

export enum Span2ColumnSourceType {
  PromptVariable = 1,
  SpanMeta = 2,
  SpanTag = 3,
}

export enum TaskStatusType {
  Undefined = 0,
  Unstarted = 1,
  Running = 2,
  Succeeded = 3,
  Failed = 4,
  Pending = 5,
  Stopped = 6,
}

/** Task */
export enum TaskType {
  Undefined = 0,
  /** Span 導入數據集 */
  SpanToDataset = 1,
  /** 在線評測 Span */
  SpanEval = 2,
  /** 批量執行自動化用例 */
  BatchExecAutoUseCase = 3,
  /** Deprecated: 統一使用 SpanToDataset
數據迴流用於模型精調 */
  SpanToDatasetForModelSFT = 4,
}

export enum ValueKind {
  Undefined = 0,
  Bool = 1,
  Integer = 2,
  Double = 3,
  String = 4,
}

export interface ApplyTicket {
  id?: string;
  url?: string;
  /** 工單狀態 */
  status?: ApplyStatus;
  /** 審批節點 */
  node?: string;
  /** 生效時間 */
  validateAt?: string;
  /** 失效時間 */
  invalidateAt?: string;
}

export interface BackfillStat {
  /** 已從觀測檢索到 span 數量 */
  retrievedSpanCount?: string;
  /** 已寫入到數據集中 span 數量 */
  backfilledSpanCount?: string;
  /** 回填狀態 */
  backfillStatus?: TaskStatusType;
}

export interface BatchExecAutoUseCaseStat {
  common?: StatusDetailCommon;
  /** 各用例執行情況 */
  evalCaseRun?: Array<EvalCaseRun>;
}

export interface ColumnInfo {
  /** 數據集列名 */
  name: string;
  /** 註釋 */
  desc?: string;
}

/** ProcessorConfig */
export interface DatasetConfig {
  /** 爲0時表示新建數據集 */
  datasetID: string;
  datasetName?: string;
  /** 默認將 span 的 input&output tag 寫入 dataset 同名列中, 通過 extraColumns 定義其他列的迴流 */
  extraColumns?: Array<Span2ColumnConfig>;
  /** omitDefaultColumns=true 時，不寫入默認的 input、output 列 */
  omitDefaultColumns?: boolean;
  datasetDesc?: string;
}

/** Deprecated */
export interface DatasetForModelSFTConfig {
  datasetID?: string;
  datasetName?: string;
  customColumns?: Array<ColumnInfo>;
}

export interface EffectiveTime {
  /** unix timestamp */
  startAt?: string;
  /** unix timestamp */
  endAt?: string;
  /** 生效日，以開始生效時間爲準 */
  effectiveDays?: ExecutePeriodic;
  /** 生效時間-開始， HH:mm:SS */
  effectivePeriodStart?: string;
  /** 生效時間-結束， HH:mm:SS */
  effectivePeriodEnd?: string;
  /** 生效時間-所在時區，±HH:MM。 */
  effectivePeriodTimeZone?: string;
}

export interface EvalCase {
  id: string;
  name?: string;
}

export interface EvalCaseRun {
  /** 用例 ID */
  caseID?: string;
  /** 評測任務 ID */
  taskID?: string;
  caseName?: string;
  status?: flow_devops_evaluation_task.TaskStatus;
}

export interface EvalCasesConfig {
  evalCases: Array<EvalCase>;
}

export interface EvalRuleConfig {
  evalRuleID: string;
  evalRuleName?: string;
}

/** Rule */
export interface Rule {
  /** 任務對象類型 */
  objectType?: ObjectType;
  /** 任務對象唯一鍵，對應 cozeBot 和 fornax psm 的 appUID */
  objectUID?: string;
  objectName?: string;
  /** 通過 filter 指定任務對象的其他信息。如 fornax psm 的 env+cluster */
  objectFilter?: SpanFilter;
  /** 採樣配置 */
  sampler?: Sampler;
  /** 篩選條件 */
  spanFilter?: SpanFilter;
  /** Deprecated, typo, 換用 triggerTime(13) 字段 */
  tiggerTime?: TriggerTime;
  /** 生效時間窗口 */
  effectiveTime?: EffectiveTime;
  /** 任務對象在 fornax 平臺上的 id */
  objectID?: Int64;
  /** 內置過濾器, 包含服務端定義的複雜過濾邏輯. 用於頁面的"數據類型"字段過濾 */
  builtinFilter?: BuiltinSpanFilterType;
  /** 迴流歷史數據 */
  effectiveTimeFromPast?: EffectiveTime;
  /** 定時觸發時效配置 */
  triggerTime?: TriggerTime;
  /** Processor Config
數據集 */
  dataset?: DatasetConfig;
  /** 在線評測規則 */
  evalRule?: EvalRuleConfig;
  /** 批量評測用例 */
  evalCases?: EvalCasesConfig;
  /** Deprecated 數據迴流用於模型精調 */
  datasetForModelSFT?: DatasetForModelSFTConfig;
}

/** Sampler */
export interface Sampler {
  /** 採樣率 */
  sampleRate?: number;
  /** 採樣上限 */
  sampleSize?: string;
}

export interface Span2ColumnConfig {
  sourceType: Span2ColumnSourceType;
  /** 根據 sourceType 不同, 其值爲 span 屬性, prompt 變量的 key 等 */
  sourceField: string;
  /** 指定 sourceField 的 JSON 提取路徑 */
  sourceFieldJSONPath?: string;
  /** dataset column 名 */
  datasetColumn: string;
}

export interface SpanEvalStat {
  common?: StatusDetailCommon;
  /** 評測規則 ID */
  ruleID?: string;
  /** 評測任務 ID */
  taskID?: string;
  caseID?: Int64;
  /** 符合 filter 的 span 條數 */
  matchedSpan?: string;
  /** 採樣器命中的 span 條數 */
  sampledSpan?: string;
  firstWrittenAt?: string;
  lastWrittenAt?: string;
  /** 等待評測 */
  queuing?: string;
  /** 評測中 */
  evaluating?: string;
  /** 評測完成 */
  evaluated?: string;
  /** 評測失敗 */
  evaluateFailed?: string;
}

/** Span 過濾器 */
export interface SpanFilter {
  op: FilterLogicOp;
  tagFilters?: Array<TagFilter>;
  spanFilters?: Array<SpanFilter>;
}

export interface SpanToDatasetStat {
  common?: StatusDetailCommon;
  /** 數據集 ID */
  datasetID?: string;
  /** 符合 filter 的 span 條數 */
  matchedSpan?: string;
  /** 採樣器命中的 span 條數 */
  sampledSpan?: string;
  /** 採樣上限 */
  sampleLimit?: string;
  /** 首條寫入時間 */
  firstWrittenAt?: string;
  /** 最近寫入時間 */
  lastWrittenAt?: string;
  /** 寫入數據集的 span 條數 */
  writtenSpan?: string;
  /** 數據集已寫滿 */
  hitsDatasetLimit?: boolean;
}

/** Task Status Detail */
export interface StatusDetailCommon {
  /** task 終止執行的原因 */
  pauseReason?: string;
}

/** 字段過濾器 */
export interface TagFilter {
  tag: string;
  op: FilterCmpOp;
  valueKind: ValueKind;
  /** JSON 編碼的值，類型與 valueKind 一致。 當 op 爲 In, NotIn 等集合相關算子值時，類型爲 valueKind 對應的數組。 */
  value?: string;
}

/** 字段過濾器選項 */
export interface TagFilterOption {
  tag?: string;
  description?: string;
  isRequired?: boolean;
  type?: ValueKind;
  /** 允許的比較運算 */
  operators?: Array<FilterCmpOp>;
  /** 選項列表 */
  options?: Array<string>;
  /** 是否允許自定義選項 */
  allowCustomOption?: boolean;
  /** 默認單位 */
  defaultUnit?: string;
}

/** Task */
export interface Task {
  /** 任務 id */
  id?: string;
  /** 名稱 */
  name?: string;
  /** 所在空間 */
  spaceID?: string;
  /** 類型 */
  type?: TaskType;
  /** 狀態 */
  status?: TaskStatusType;
  /** 描述 */
  description?: string;
  rule?: Rule;
  /** 是否可刪除 */
  deletable?: boolean;
  /** 是否可編輯 */
  editable?: boolean;
  /** 密級 */
  securityLevel?: SecurityLevel;
  /** 審批工單信息 */
  ticket?: ApplyTicket;
  /** Status detail
數據集導入狀態詳情 */
  spanToDatatasetStat?: SpanToDatasetStat;
  /** 在線評測狀態詳情 */
  spanEvalStat?: SpanEvalStat;
  /** 批量評測狀態詳情 */
  batchExecAutoUseCaseStat?: BatchExecAutoUseCaseStat;
  /** 回填歷史數據詳情 */
  backfillStat?: BackfillStat;
  /** 創建者 */
  createdBy?: string;
  /** 更新者 */
  updatedBy?: string;
  /** 創建時間 */
  createdAt?: string;
  /** 更新時間 */
  updatedAt?: string;
}

export interface TriggerTime {
  execAt?: string;
  /** 按天重複 */
  repeatDays?: ExecutePeriodic;
}
/* eslint-enable */
