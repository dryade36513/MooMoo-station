/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

import * as flow_devops_evaluation_callback_common from './flow_devops_evaluation_callback_common';

export type Int64 = string | number;

/** https://lilianweng.github.io/posts/2023-06-23-agent/agent-overview.png
 Agent 包含：Planning、Memory、Tools 等。
 這裏 Action 泛指 Agent 下的各種子組件的類型的執行 */
export enum ActionType {
  Unknown = 0,
  LLMPlanning = 1,
  ToolCall = 2,
  /** coze agent 思考過程 */
  CozeVerbose = 100,
}

export enum BuiltinEvaluatorType {
  /** 以用戶定製輸入的 PromptTemplate 作爲評估器的配置信息，對評估對象的輸入輸出進行測評 */
  Prompt = 1,
  /** 以用戶定製輸入的 Python Code 作爲評估器的配置信息，對評估對象的輸入輸出進行測評 */
  PythonCode = 2,
  /** 以用戶定製輸入的 JS Code 作爲評估器的配置信息，對評估對象的輸入輸出進行測評 */
  JSCode = 3,
  /** 人工評測 */
  Manual = 7,
  /** prompt開發中的prompt */
  FornaxPrompt = 10,
  /** coze2.0 裁判模型評估器 */
  CozePrompt = 11,
  /** 以用戶定製輸入的 Func 靜態參數 作爲評估器的配置信息，對評估對象的輸入輸出進行測評 */
  BuiltinEquals = 10000,
  BuiltinNotEquals = 10001,
  BuiltinContains = 10002,
  BuiltinNotContains = 10003,
  BuiltinIContains = 10004,
  BuiltinNotIContains = 10005,
  BuiltinRegex = 10006,
  BuiltinNotRegex = 10007,
  BuiltinStartsWith = 10008,
  BuiltinNotStartsWith = 10009,
  BuiltinContainsAny = 10010,
  BuiltinNotContainsAny = 10011,
  BuiltinContainsAll = 10012,
  BuiltinNotContainsAll = 10013,
  BuiltinIContainsAny = 10014,
  BuiltinNotIContainsAny = 10015,
  BuiltinIContainsAll = 10016,
  BuiltinNotIContainsAll = 10017,
  BuiltinIsJSON = 10018,
  BuiltinNotIsJSON = 10019,
  /** deprecated */
  BuiltinContainsJSON = 10020,
  /** deprecated */
  BuiltinNotContainsJSON = 10021,
  BuiltinIsValidJSONObject = 10022,
  BuiltinNotIsValidJSONObject = 10023,
  /** single criteria eval (auto check label / unlabeled) */
  BuiltinConcisenessCriteriaEval = 20001,
  BuiltinRelevanceCriteriaEval = 20002,
  BuiltinHarmfulnessCriteriaEval = 20003,
  BuiltinMaliciousnessCriteriaEval = 20004,
  BuiltinHelpfulnessCriteriaEval = 20005,
  BuiltinControversialityCriteriaEval = 20006,
  BuiltinMisogynyCriteriaEval = 20007,
  BuiltinCriminalityCriteriaEval = 20008,
  BuiltinInsensitivityCriteriaEval = 20009,
  BuiltinDepthCriteriaEval = 20010,
  BuiltinCreativityCriteriaEval = 20011,
  BuiltinDetailCriteriaEval = 20012,
  /** must labeled, CotQA */
  BuiltinCorrectnessEval = 20013,
  /** 語言一致性 */
  BuiltinSpecTestLanguageConsistency = 20014,
  /** 回覆拒答檢查 */
  BuiltinSpecTestResponseDenialCheck = 20015,
  /** 內容真實性 */
  BuiltinSpecTestContentAuthenticity = 20016,
  /** 內容準確性 */
  BuiltinSpecTestContentAccuracy = 20017,
  /** 滿足需求性 */
  BuiltinSpecTestNeedFulfillment = 20018,
  /** 回覆時效性 */
  BuiltinSpecTestResponseTimeliness = 20019,
  /** 回覆冗餘性 */
  BuiltinSpecTestResponseRedundancy = 20020,
  /** 符合人設 */
  BuiltinSpecTestCharacterConsistency = 20021,
  /** 擬人程度 */
  BuiltinSpecTestAnthropomorphismLevel = 20022,
  /** 輸入-輸出語義相似度 */
  BuiltinSpecTestIOSematicSimilarity = 20023,
  /** 答案-輸出語義相似度 */
  BuiltinSpecTestAOSematicSimilarity = 20024,
  /** 生圖一致性 */
  BuiltinSpecTestImageGenerationConsistency = 20025,
  /** 圖片美觀性 */
  BuiltinSpecTestImageAesthetics = 20026,
  /** 回覆完整性 */
  BuiltinSpecTestResponseCompleteness = 20027,
  /** 文生圖完整性 */
  BuiltinSpecTestTextToImageGenerationCompleteness = 20028,
  /** 代碼生成質量 */
  BuiltinSpecTestCodeGenerationScoring = 20029,
  /** 插件調用正確性 for coze bot */
  BuiltinSpecTestPluginCallingCorrectness = 20030,
  /** 插件入參正確性 for coze bot */
  BuiltinSpecTestPluginParametersCorrectness = 20031,
  /** Workflow調用正確性 for coze bot */
  BuiltinSpecTestWorkflowCallingCorrectness = 20032,
  /** Workflow入參正確性 for coze bot */
  BuiltinSpecTestWorkflowParametersCorrectness = 20033,
  /** 觸發器調用正確性 for coze bot */
  BuiltinSpecTestTriggerCallingCorrectness = 20034,
  /** 觸發器入參正確性 for coze bot */
  BuiltinSpecTestTriggerParametersCorrectness = 20035,
  /** 流程編排準確性 for coze bot */
  BuiltinSpecTestChoreographyAccuracy = 20036,
  /** Fornax prompt 泄露檢測 */
  BuiltinFornaxPromptLeakDetection = 20200,
  /** 自定義指標
系統內置指標 */
  BuiltinDefaultMetric = 30001,
  /** 用戶上報自定義指標 */
  BuiltinCustomMetric = 30002,
}

export enum EvaluatorState {
  Success = 1,
  Fail = 2,
}

/** A full description of an action for an Agent to execute. */
export interface AgentAction {
  agent_type?: ActionType;
  /** 本次執行工具的標識、名稱等信息。由評測對象接入方自主定義其格式 */
  action_meta?: string;
  /** Additional information to log about the action.
This log can be used in a few ways. First, it can be used to audit
what exactly the LLM predicted to lead to this (Name, Input).
Second, it can be used in future iterations to show the LLMs prior
thoughts. This is useful when (Name, Input) does not contain
full information about the LLM prediction (for example, any `thought`
before the tool/tool_input).
this field is mainly used to show more information for human */
  log?: string;
  /** the input to pass in to the Tool. */
  input?: flow_devops_evaluation_callback_common.Content;
  /** the output of the Agent */
  output?: flow_devops_evaluation_callback_common.Content;
  /** extend information */
  ext?: Record<string, string>;
}

export interface Evaluator {
  type?: Int64;
  /** 在評估器管理平臺上註冊時，提供了需要透傳的 RuleMeta 信息。 建議採用 JSON 序列化 */
  evaluator_meta?: string;
}

/** 以一行數據集爲例：
列名：      input             output         context              person
列值：  "我適合什麼樣的工作"   "你適合休息"   "不喜歡挑戰、不喜歡出力"   "{性別：男， 年齡：18， 文憑：名牌大學畢業}"
Input 參數構建：
  Input: "我適合什麼樣的工作"
  Variables: map{ context: "不喜歡挑戰、不喜歡出力", person: "{性別：男， 年齡：18， 文憑：名牌大學畢業}" }
  Histories: null */
export interface Input {
  /** 數據集中的 input 列，一般代表評測Case中的用戶輸入 */
  input?: string;
  /** 數據集中，除 input、output 列之外，其他所有的列均視爲是 Variable，列名作爲 key、列值作爲 value */
  variables?: Record<string, flow_devops_evaluation_callback_common.Content>;
  /** 多輪評測場景中，數據集中的一行數據中又可拆分成 n 輪評測輸入。
在第 n 輪的評測中，Histories 傳入 [1 ~ n-1] 的信息，採用 Json 序列化。 第 n 輪的信息由 Input 字段傳入
此處前 n-1 輪的信息，採用 Json 序列化。序列化的 Schema 由評測任務制定，由評估器進行解析使用
例如：
Input: "我今天出門適合什麼穿搭？"
Histories：[{ "human": "我在XX市XX區，今天天氣怎麼樣", "assistant": "經過查詢天氣API，今天有雷陣雨，5級大風，溫度5度左右" }] */
  histories?: Array<flow_devops_evaluation_callback_common.Message>;
  /** 數據集中的 output 列，一般代表評測Case中, 預期評測對象要產生的輸出，通常作爲評測的 Reference。 可以是 string，也可以是 Json 序列化 */
  output?: string;
  /** 評估對象的輸出信息。評估器會以數據集中 output 列爲基準，對評估對象輸出的 Prediction 進行評測
Prediction 可以是 string、也可以是 JSON 結構體，需要與評估器對齊解析方式 */
  prediction?: string;
  /** 非文本模態時，評估器會以 output_v2 爲基準，對評估對象輸出的 prediction_v2 進行評測
文本模態時，可以繼續使用 1~5 號字段 */
  input_v2?: flow_devops_evaluation_callback_common.Content;
  output_v2?: flow_devops_evaluation_callback_common.Content;
  prediction_v2?: flow_devops_evaluation_callback_common.Content;
  trajectory?: Trajectory;
}

export interface Metrics {
  /** 運行開始時間 */
  start_time?: Int64;
  /** 運行結束時間 */
  end_time?: Int64;
}

export interface Result {
  /** 規則運行狀態 */
  state: EvaluatorState;
  /** 報錯時的信息 */
  err_msg?: string;
  /** 打分結果 */
  score?: number;
  /** 打分過程與結果相關信息 */
  reasoning?: string;
  usage?: Usage;
  metrics?: Metrics;
  /** 冗餘，暫無使用場景 */
  ext?: Record<string, string>;
}

export interface RuleConfig {
  /** ID 用於定位一個 JSON Schema, 來解析下面的 string JSON content */
  id: Int64;
  /** 用戶選定評估器時，需要提供該評估器的配置內容，方能組合成一條可正常運行的 Rule
每個評估器的配置內容，是由評估器提供方定義的。評估器管理平臺回調評估器時，需要根據評估器要求的 JSON Schema，構造配置內容 */
  data: string;
}

export interface Trajectory {
  /** 端到端測試時，評測對象內部執行的每一步的 Action 信息
list 中的 index 代表評測對象執行時，觀測到的 Step
注：隨着觀測節點的增加，一個 AgentAction 所處的 step 會發生變化 */
  actions?: Array<AgentAction>;
}

export interface Usage {
  /** 計費信息。一次評估對象Playground執行時，內部總的輸入、輸出的Tokens的消耗 */
  input_tokens?: Int64;
  output_tokens?: Int64;
}
/* eslint-enable */
