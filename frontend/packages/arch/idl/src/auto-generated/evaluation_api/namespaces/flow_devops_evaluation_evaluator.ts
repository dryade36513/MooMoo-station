/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

import * as flow_devops_evaluation_entity from './flow_devops_evaluation_entity';
import * as base from './base';
import * as flow_devops_evaluation_callback_common from './flow_devops_evaluation_callback_common';
import * as flow_devops_evaluation_evaluator_callback from './flow_devops_evaluation_evaluator_callback';

export type Int64 = string | number;

export enum ContentType {
  Txt = 1,
  Image = 2,
  Audio = 3,
  Video = 4,
  Link = 6,
  Music = 7,
  Tako = 8,
  File = 9,
  Card = 50,
  BotCard = 51,
  APP = 100,
  OutputSearchResult = 200,
}

/** Evaluator 執行時的處理流程的類型，表達 Evaluator 實現方式的屬性信息
 EvaluatorID 是不可枚舉的，但 EvaluatorProcessType 是可枚舉的
 EvaluatorProcessType 是創建 Evaluator 時必須確定下來的信息。 */
export enum EvaluatorProcessType {
  Prompt = 1,
  PythonCode = 2,
  JSCode = 3,
  BuildinFunc = 4,
  BuildinPrompt = 5,
  /** 目前包含了RPCCallback 和 HTTPCallback */
  CustomCallback = 6,
  /** 人工評測 */
  Manual = 7,
  /** 自定義指標上報 */
  CustomMetric = 8,
  /** 專項測試規則 */
  BuiltinSpecTest = 9,
  /** fornax平臺Prompt開發中的prompt */
  FornaxPrompt = 10,
  /** coze2.0 裁判模型評估器 */
  CozePrompt = 11,
}

export enum LLMResponseFormat {
  TEXT = 0,
  MARKDOWN = 1,
  JSON = 2,
}

export enum ReplyType {
  Answer = 1,
  Suggest = 2,
  LLMOutput = 3,
  ToolOutput = 4,
  DataSet = 5,
  QueryKeyword = 6,
  IntermediateOutput = 7,
}

export enum RuleRunState {
  /** 運行狀態, 異步下狀態流轉, 同步下只有 Success / Fail */
  NotInit = 0,
  Init = 1,
  Processing = 2,
  Success = 3,
  Fail = 4,
}

export enum SupportUpdateRuleGroupField {
  Name = 4,
  Desc = 5,
}

export interface AddToHubEvaluatorTypeMeta {
  evaluator_hub_id: Int64;
  /** 展示用名稱 */
  name?: string;
  /** 權重 */
  weight?: Int64;
  /** 評測粒度 */
  granularity?: flow_devops_evaluation_entity.EvaluatorGranularity;
  prompt_rule?: PromptRule;
  python_rule?: PythonRule;
  js_rule?: JSRule;
  manual_rule?: ManualRule;
  fornax_prompt_rule?: FornaxPromptRule;
}

export interface BatchGetRuleGroupMetaRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule_group_ids: Array<Int64>;
  /** true 時 response 返回 rules 數量, 目前對接口性能有影響 */
  need_rules_count?: boolean;
  Base?: base.Base;
}

export interface BatchGetRuleGroupMetaResponse {
  metas?: Array<RuleGroupMeta>;
  BaseResp?: base.BaseResp;
}

export interface BuildinFuncRule {
  contents?: Array<string>;
}

export interface BuildinPromptRule {
  contents?: Array<string>;
  model_name?: string;
  /** 20240815 服務端內部使用 */
  ModelInfo?: flow_devops_evaluation_entity.ModelInfo;
}

export interface CopyRuleGroupRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  source_rule_group_id: Int64;
  /** 爲空時創建一個新的 rule_group_id，不爲空時向目標 rule_group 中添加 rules */
  target_rule_group_id?: Int64;
  /** 複製到目標空間，爲空時，默認複製到 SpaceID 空間 */
  to_space_id?: Int64;
  cid?: string;
  Base?: base.Base;
}

export interface CopyRuleGroupResponse {
  /** 如果 req.TargetRuleGroupID 爲空則是生成的新 id, 不爲空則是 TargetRuleGroupID */
  rule_group_id: Int64;
  /** copy 出來的 rules, id 都是新的 */
  copied_rules: Array<Rule>;
  /** 複製到的目標空間ID */
  to_space_id?: Int64;
  BaseResp?: base.BaseResp;
}

export interface CozePromptRule {
  model_info: ModelInfo;
  prompt: string;
}

export interface CreateRuleAndSaveToHubRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule: Rule;
  rule_group_id: Int64;
  /** 保存到Hub時，支持對evaluatorType打自定義標籤以及模態標籤 */
  tags?: Array<string>;
  modal_tags?: Array<string>;
  cid?: string;
  Base?: base.Base;
}

export interface CreateRuleAndSaveToHubResponse {
  rule?: Rule;
  evaluator_hub_id?: Int64;
  BaseResp?: base.BaseResp;
}

export interface CreateRuleGroupRequest {
  'FlowDevops-Agw-UserId'?: string;
  name?: string;
  desc?: string;
  'FlowDevops-Agw-AppId'?: number;
  /** 規則界面可見 */
  publish_to_rule_group?: boolean;
  space_id: Int64;
  /** 是否打上tag, 默認不打上 */
  tag_list?: Array<flow_devops_evaluation_entity.TagInfo>;
  cid?: string;
  Base?: base.Base;
}

export interface CreateRuleGroupResponse {
  rule_group?: RuleGroup;
  BaseResp?: base.BaseResp;
}

export interface CreateRuleRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  /** 向目標 rule_group 添加 rule */
  rule_group_id: Int64;
  rule: Rule;
  cid?: string;
  Base?: base.Base;
}

export interface CreateRuleResponse {
  rule?: Rule;
  BaseResp?: base.BaseResp;
}

export interface CreateRulesRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  /** 向目標 rule_group 添加 rule */
  rule_group_id: Int64;
  rules: Array<Rule>;
  cid?: string;
  Base?: base.Base;
}

export interface CreateRulesResponse {
  rules?: Array<Rule>;
  BaseResp?: base.BaseResp;
}

export interface CustomCallback {
  content?: string;
  /** 回調業務方的env */
  env?: string;
}

/** 自定義指標規則 */
export interface CustomMetricsRule {
  data_type: flow_devops_evaluation_entity.EvaluateResultDataType;
  value_type?: flow_devops_evaluation_entity.EvaluateResultValueType;
}

export interface DebugRuleRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule: Rule;
  data: RunRuleInputData;
  Base?: base.Base;
}

export interface DebugRuleResponse {
  result: RunRuleResult;
  BaseResp?: base.BaseResp;
}

export interface DeleteEvaluatorHubRequest {
  evaluator_hub_id: Int64;
  'FlowDevops-Agw-UserId'?: string;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
}

export interface DeleteEvaluatorHubResponse {
  BaseResp?: base.BaseResp;
}

export interface DeleteEvaluatorTypeRequest {
  evaluator_type: string;
  'FlowDevops-Agw-UserId'?: string;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
  cid?: string;
}

export interface DeleteEvaluatorTypeResponse {
  BaseResp?: base.BaseResp;
}

export interface DeleteRuleGroupRequest {
  'FlowDevops-Agw-UserId'?: string;
  rule_group_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
  cid?: string;
  Base?: base.Base;
}

export interface DeleteRuleGroupResponse {
  BaseResp?: base.BaseResp;
}

export interface EvalautorTypeMeta {
  name: string;
  evaluator_type: Int64;
  process_type: EvaluatorProcessType;
  tool_tip_content?: string;
  is_positive?: boolean;
  /** 與評估器綁定的評估器規則的 Json Schema 描述 */
  rule_config_json_schema?: string;
  /** 僅 process_type = 4 生效, true 時代表 Is, false 時代表 NotIs，其餘規則爲空 */
  builtin_func_use_is_syntax?: boolean;
  receive_chat_history?: boolean;
  /** 規則可選的模型列表 */
  available_model_name?: Array<string>;
  /** 模態標籤 */
  modal_tag?: Array<string>;
  /** 自定義標籤顯示 */
  tags?: Array<string>;
  /** 爲true時,代表是保存到hub的 */
  is_add_to_hub?: boolean;
  /** 用戶保存到hub中EvalautorTypeMeta信息 */
  hub_evaluator_type_meta?: AddToHubEvaluatorTypeMeta;
  /** 樣例 */
  sample?: string;
}

export interface EvaluatorTypeDetailInfo {
  evaluator_type?: Int64;
  evaluator_type_name: string;
  space_id: string;
  callback_type: flow_devops_evaluation_entity.CallbackType;
  description?: string;
  /** 與評估器綁定的評估器規則的 Json Schema 描述 */
  rule_config_json_schema?: string;
  creator_id?: Int64;
  rpc_callback_evaluator_params?: RPCCallbackEvaluatorParams;
  http_callback_evaluator_params?: HttpCallbackEvaluatorParams;
}

export interface FornaxPromptRule {
  /** prompt開發中prompt的唯一標識 */
  prompt_id: Int64;
  /** prompt版本 */
  version?: string;
  /** 服務端內部使用 */
  ModelInfo?: flow_devops_evaluation_entity.ModelInfo;
}

export interface GetEvaluatorTypeRequest {
  evaluator_type: Int64;
  'FlowDevops-Agw-UserId'?: string;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
}

export interface GetEvaluatorTypeResponse {
  evaluator_type_detail_info: EvaluatorTypeDetailInfo;
  BaseResp?: base.BaseResp;
}

export interface GetRuleGroupMetaRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule_group_id: Int64;
  Base?: base.Base;
}

export interface GetRuleGroupMetaResponse {
  meta?: RuleGroupMeta;
  BaseResp?: base.BaseResp;
}

export interface GetRuleGroupRulesRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule_group_id: Int64;
  Base?: base.Base;
}

export interface GetRuleGroupRulesResponse {
  rules?: Array<Rule>;
  default_custom_metrics_rules?: Array<Rule>;
  BaseResp?: base.BaseResp;
}

export interface GetRulesRequest {
  'FlowDevops-Agw-UserId'?: string;
  rule_ids?: Array<Int64>;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
  Base?: base.Base;
}

export interface GetRulesResponse {
  /** len 和下標與 MGetRulesRequest.RuleIDs 一致 */
  rules?: Array<Rule>;
  BaseResp?: base.BaseResp;
}

export interface HttpCallbackEvaluatorParams {
  psm?: string;
  cluster?: string;
  /** 單位ms */
  timeout?: Int64;
  agent_execute_path?: string;
  http_auth_type?: flow_devops_evaluation_entity.HTTPAuthType;
  method?: flow_devops_evaluation_entity.HTTPMethod;
}

export interface JSRule {
  code: string;
}

/** ListCustomSupportRuleTypeFilter 請求過濾規則 */
export interface ListCustomSupportRuleTypeFilter {
  evaluator_type_name?: string;
}

export interface ListCustomSupportRuleTypeRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  /** first 爲空 */
  cursor?: string;
  'FlowDevops-Agw-AppId'?: number;
  /** 默認 20 */
  limit?: Int64;
  list_custom_support_rule_type_filter?: ListCustomSupportRuleTypeFilter;
  Base?: base.Base;
}

export interface ListCustomSupportRuleTypeResponse {
  types?: Array<EvalautorTypeMeta>;
  has_more?: boolean;
  next_cursor?: string;
  BaseResp?: base.BaseResp;
}

export interface ListEvaluatorTypeDetailRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  list_evaluator_type_filter?: ListEvaluatorTypeFilter;
  /** first 爲空 */
  cursor?: string;
  limit?: Int64;
}

export interface ListEvaluatorTypeDetailResponse {
  evaluator_type_detail_infos?: Array<EvaluatorTypeDetailInfo>;
  has_more?: boolean;
  next_cursor?: string;
  BaseResp?: base.BaseResp;
}

/** ListEvaluatorTypeFilter 請求過濾規則 */
export interface ListEvaluatorTypeFilter {
  evaluator_type_name?: string;
  callback_type?: flow_devops_evaluation_entity.CallbackType;
  creator_id?: Int64;
}

export interface ListRuleGroupMetaRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  /** first 爲空 */
  cursor?: string;
  'FlowDevops-Agw-AppId'?: number;
  /** 默認 20 */
  limit?: Int64;
  /** true 時 response 返回 rules 數量, 目前對接口性能有影響 */
  need_rules_count?: boolean;
  tag_name?: string;
  tag_value?: string;
  /** -- search fields -- */
  fuzzy_name?: string;
  creator_id?: Int64;
  Base?: base.Base;
}

export interface ListRuleGroupMetaResponse {
  /** 只返回 meta */
  metas?: Array<RuleGroupMeta>;
  has_more?: boolean;
  next_cursor?: string;
  BaseResp?: base.BaseResp;
}

export interface ListSupportRuleTypeRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  /** first 爲空 */
  cursor?: string;
  'FlowDevops-Agw-AppId'?: number;
  /** 默認 20 */
  limit?: Int64;
  Base?: base.Base;
}

export interface ListSupportRuleTypeResponse {
  types?: Array<EvalautorTypeMeta>;
  has_more?: boolean;
  next_cursor?: string;
  BaseResp?: base.BaseResp;
}

export interface LLMSetting {
  model_version: string;
  temperature: number;
  respose_max_length: Int64;
}

/** 多維度人工評測評分規則 */
export interface ManualRule {
  /** 數據類型：數值評分、選項、純文本 */
  data_type: flow_devops_evaluation_entity.EvaluateResultDataType;
  /** 評分範圍 */
  scope?: flow_devops_evaluation_entity.ScoringScope;
  options?: Array<flow_devops_evaluation_entity.EvaluateResultOption>;
}

export interface ModelInfo {
  model_id: Int64;
  temperature: number;
  max_tokens: Int64;
  top_p?: number;
  response_format?: LLMResponseFormat;
  presence_penalty?: number;
  frequency_penalty?: number;
  model_style?: Int64;
  model_name?: string;
}

export interface PromptRule {
  setting: LLMSetting;
  content: string;
  /** 20240815 服務端內部使用 */
  ModelInfo?: flow_devops_evaluation_entity.ModelInfo;
}

export interface PythonRule {
  code: string;
}

export interface RegisterEvaluatorTypeRequest {
  evaluator_type_detail_info: EvaluatorTypeDetailInfo;
  'FlowDevops-Agw-UserId'?: string;
  'FlowDevops-Agw-AppId'?: number;
  cid?: string;
}

export interface RegisterEvaluatorTypeResponse {
  evaluator_type_detail_info: EvaluatorTypeDetailInfo;
  BaseResp?: base.BaseResp;
}

export interface RemoveRuleRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule_group_id: Int64;
  rule_id: Int64;
  cid?: string;
  Base?: base.Base;
}

export interface RemoveRuleResponse {
  BaseResp?: base.BaseResp;
}

export interface ReplyContent {
  reply_type: ReplyType;
  content_type: ContentType;
  content: string;
  input_token_cnt: Int64;
}

export interface RPCCallbackEvaluatorParams {
  psm?: string;
  cluster?: string;
  /** 單位ms */
  timeout?: Int64;
}

export interface Rule {
  /** 規則 id */
  rule_id?: Int64;
  /** 評估器標識 */
  evaluator_type: Int64;
  process_type: EvaluatorProcessType;
  /** 自定義評估器的名稱 */
  evaluator_type_name?: string;
  /** 權重 */
  weight?: Int64;
  creator_id?: Int64;
  /** 展示用名稱 */
  name?: string;
  /** 評測粒度 */
  granularity?: flow_devops_evaluation_entity.EvaluatorGranularity;
  receive_chat_history?: boolean;
  /** 數據類型 */
  data_type?: flow_devops_evaluation_entity.EvaluateResultDataType;
  /** 不同的 EvaluatorProcessType 對應着不同的結構體定義 */
  prompt_rule?: PromptRule;
  python_rule?: PythonRule;
  js_rule?: JSRule;
  buildin_func_rule?: BuildinFuncRule;
  buildin_prompt_rule?: BuildinPromptRule;
  custom_callback?: CustomCallback;
  manual_rule?: ManualRule;
  custom_metrics?: CustomMetricsRule;
  spec_test_rule?: SpecTestRule;
  fornax_prompt_rule?: FornaxPromptRule;
  coze_prompt_rule?: CozePromptRule;
}

export interface RuleGroup {
  meta: RuleGroupMeta;
  rules: Array<Rule>;
}

export interface RuleGroupMeta {
  /** rule_group_id */
  id: Int64;
  name?: string;
  desc?: string;
  space_id: Int64;
  /** true 時該 rule group 在規則界面可見 */
  is_published?: boolean;
  creator_id?: Int64;
  created_at?: Int64;
  updated_at?: Int64;
  deleted_at?: Int64;
  /** 默認爲空 */
  rules_count?: Int64;
}

export interface RunRuleInput {
  /** task id */
  TaskID?: Int64;
  /** 評測規則 id */
  RuleID: Int64;
  /** 評測數據輸入: 數據集行內容 + 評測目標輸出內容與歷史記錄 + 評測目標的 trace */
  InputData: RunRuleInputData;
}

export interface RunRuleInputData {
  /** 1: optional dataset.Row Row              // 數據集內容, 包含 本輪輸入 與 預期輸出
歷史會話記錄 */
  history_messages?: Array<flow_devops_evaluation_callback_common.Message>;
  /** 評測目標本輪輸入 */
  input?: flow_devops_evaluation_callback_common.Message;
  /** 評測目標本輪輸出 */
  prediction?: ReplyContent;
  /** 評測目標預期輸出 */
  output?: string;
  /** 變量 */
  variables?: Record<string, flow_devops_evaluation_callback_common.Content>;
  /** 評測目標本輪輸入 v2 */
  input_v2?: flow_devops_evaluation_callback_common.Content;
  /** 評測目標預期輸出 v2 */
  output_v2?: flow_devops_evaluation_callback_common.Content;
  /** 評測目標本輪輸出 v2 */
  prediction_v2?: flow_devops_evaluation_callback_common.Content;
  /** 評測目標運行軌跡 */
  trajectory?: flow_devops_evaluation_evaluator_callback.Trajectory;
  /** 預留的擴展字段，暫無使用場景。由評測平臺傳遞定製信息給評估器Rule的實現方 */
  ext?: Record<string, string>;
}

export interface RunRuleResult {
  /** 規則運行狀態 */
  run_state: RuleRunState;
  /** 報錯時的信息 */
  err_msg?: string;
  /** 打分 */
  score?: number;
  /** 打分過程與結果相關信息 */
  score_content?: string;
  /** token count */
  tokens?: Int64;
  /** 運行開始時間 */
  start_time?: Int64;
  /** 運行結束時間 */
  end_time?: Int64;
  /** 冗餘 */
  extra?: string;
  input_tokens?: Int64;
  output_tokens?: Int64;
  /** 打分範圍，如 Coze 場景下由用戶 LLM Prompt 決定評估器輸出打分範圍 */
  scoring_scope?: flow_devops_evaluation_entity.ScoringScope;
}

export interface SpecTestRule {
  content?: string;
}

export interface UpdateEvaluatorTypeRequest {
  evaluator_type_detail_info: EvaluatorTypeDetailInfo;
  'FlowDevops-Agw-UserId'?: string;
  'FlowDevops-Agw-AppId'?: number;
}

export interface UpdateEvaluatorTypeResponse {
  BaseResp?: base.BaseResp;
}

export interface UpdateRuleGroupRequest {
  'FlowDevops-Agw-UserId'?: string;
  id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  space_id: Int64;
  /** name, description, content */
  update_fields: Array<SupportUpdateRuleGroupField>;
  name?: string;
  desc?: string;
  cid?: string;
  Base?: base.Base;
}

export interface UpdateRuleGroupResponse {
  rule_group?: RuleGroup;
  BaseResp?: base.BaseResp;
}

export interface UpdateRuleRequest {
  'FlowDevops-Agw-UserId'?: string;
  space_id: Int64;
  'FlowDevops-Agw-AppId'?: number;
  rule_group_id: Int64;
  rule_id: Int64;
  rule: Rule;
  cid?: string;
  Base?: base.Base;
}

export interface UpdateRuleResponse {
  rule?: Rule;
  BaseResp?: base.BaseResp;
}
/* eslint-enable */
