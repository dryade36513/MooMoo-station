/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

export type Int64 = string | number;

export enum ActionType {
  BotQuery = 1,
  Plugin = 2,
  Workflow = 3,
}

/** 對應前端 */
export enum BotTaskMode {
  Unknown = 0,
  Webhook = 1,
}

/** 對應前端 */
export enum BotTaskTriggerType {
  Unknown = 0,
  Time = 1,
  Event = 2,
}

export enum ChatType {
  /** 默認方式，不攜帶歷史上下文 */
  NoHistory = 0,
  /** 攜帶上下文 */
  NeedHistory = 1,
}

export enum SubTaskType {
  /** 用戶模板任務 */
  UserTaskTemplate = 1,
}

/** 0-未觸發, 1-已觸發, 2-plugin/workflow成功, 3-待推送, 4-推送成功, 5-推送失敗 */
export enum TaskExecStatus {
  NoTriggered = 0,
  /** 已觸發 */
  Triggered = 1,
  /** plugin運行成功 */
  DoAction = 2,
  /** 待推送 */
  WaitToPush = 3,
  /** 推送成功 */
  PushSuccess = 4,
  /** 推送失敗 */
  PushFail = 5,
}

export enum TaskStatus {
  /** 初始化狀態 */
  Init = 0,
  /** 生效狀態 */
  Activated = 1,
  /** 失效狀態 */
  Deactivated = 2,
  /** 暫停狀態 */
  Suspended = 3,
}

export enum TaskType {
  /** 預設任務, 包括定時和 webhook, 在 coze 上配置的 */
  Preset = 1,
  /** 用戶任務, 用戶跟模型對話得到的 */
  UserTask = 2,
  /** Plugin 後臺任務，如異步 plugin 場景, 後臺任務，不需要展示給 開發者 / 用戶 */
  PluginRunTask = 3,
}

export interface Action {
  action_type: ActionType;
  /** 僅 action_type == 1 纔有 */
  bot_query_action?: ActionBotQuery;
  /** 僅 action_type == 2 纔有 */
  plugin_action?: ActionPlugin;
  /** 僅 action_type == 3 纔有 */
  workflow_action?: ActionWorkflow;
}

export interface ActionBotQuery {
  content: string;
}

export interface ActionPlugin {
  plugin_id: string;
  api_name: string;
  params: string;
  /** 前端透傳，服務端不敢知 */
  extra?: string;
}

export interface ActionWorkflow {
  workflow_id: string;
  plugin_id: string;
  params: string;
  /** 前端透傳，服務端不敢知 */
  extra?: string;
}

export interface PresetTimeTriggerData {
  /** cron表達式 */
  cron_expr: string;
  time_zone?: string;
  cron_expr_text?: string;
}

export interface PresetWebhookTriggerData {
  url: string;
  bearer_token: string;
  output_schema: string;
  /** 調試時的默認輸入 */
  default_output?: string;
  credential_key?: string;
}

/** bot 新增自動化
 */
export interface TaskInfo {
  id: Int64;
  id_str: string;
  connector_id: Int64;
  name: string;
  trigger: Trigger;
  action: Action;
  status: TaskStatus;
  /** 秒級時間戳 */
  create_time: Int64;
  /** 創建時生成，編輯/發佈保持不變 */
  origin_id: Int64;
  creator_uid?: string;
  /** Chat 類型 */
  chat_type?: ChatType;
  /** 任務配置 */
  config?: string;
  /** 已發佈渠道，agent僅支持飛書 */
  connector_ids?: Array<Int64>;
  /** 聚合字段 */
  bot_version?: string;
  /** 最近一次執行結果 */
  exec_result?: TaskExecStatus;
  /** 距離下次運行事件，秒 */
  next_exec_duration?: number;
  /** 生效狀態，true爲生效 */
  valid_status?: boolean;
}

export interface Trigger {
  task_type: TaskType;
  /** "time", "webhook", "oauth2_webhook","long_task" */
  event_type: string;
  /** 僅 task_type == 1 && (event_type == "time" || trigger_type == time) */
  preset_time_data?: PresetTimeTriggerData;
  /** 僅 task_type == 1 && (event_type == "webhook" || (trigger_type == event && mode == webhook)) */
  preset_webhook_data?: PresetWebhookTriggerData;
  /** 僅 task_type == 2 && (event_type == "time" || trigger_type == time) */
  user_task_time_data?: UserTaskTimeTriggerData;
  trigger_type: BotTaskTriggerType;
  mode: BotTaskMode;
}

export interface UserTaskTimeTriggerData {
  /** cron表達式 */
  cron_expr: string;
  time_zone?: string;
  conversation_id: string;
  user_id: string;
  /** 秒時間戳 */
  start_time?: Int64;
  /** 秒時間戳 */
  stop_time?: Int64;
  /** 非週期任務。需要傳 start time */
  trigger_only_once?: boolean;
  /** 推送的cron表達式 */
  push_cron_expr?: string;
}
/* eslint-enable */
