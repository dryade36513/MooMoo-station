/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

export type Int64 = string | number;

/** ActionType 執行類型
 NEXT ID: 2 */
export enum ActionType {
  Undefined = 0,
  ConstReturn = 1,
}

/** BizType - 業務線
 NEXT ID: 3 */
export enum BizType {
  Default = 0,
  CozeBot = 1,
  FornaxSlot = 2,
  FornaxPrompt = 3,
}

/** ComboTyppe 組合類型 */
export enum ComboType {
  Undefined = 0,
  /** conditions中都爲true, 返回true, 否則false */
  And = 1,
  /** conditions中任一true, 返回true, 否則false */
  Or = 2,
}

/** ConditionType 條件類型
 NEXT ID: 7 */
export enum ConditionType {
  Undefined = 0,
  XTtEnv = 1,
  VersionIdentifier = 2,
  TargetIDs = 3,
  Gray = 4,
  OperatorExpr = 5,
  Combo = 6,
}

/** ConstValueType 常量返回值類型
 NEXT ID: 6 */
export enum ConstValueType {
  Undefined = 0,
  Bool = 1,
  String = 2,
  Int = 3,
  Double = 4,
  StringList = 5,
}

/** ExprType 列出當前支持的表達式類型
 NEXT ID: 3 */
export enum ExprType {
  Undefined = 0,
  ConstExpr = 1,
  VarExpr = 2,
}

/** GrayField - 灰度字段
 NEXT ID: 3 */
export enum GrayFieldType {
  Undefined = 0,
  /** 對應commonArgs中的uid */
  Uid = 1,
  /** 對應commonArgs中的deviceID */
  Did = 2,
  /** 用戶自定義字段 */
  CustomKey = 3,
}

/** ChoiceType - 判斷條件類型
 NEXT ID: 6 */
export enum OperatorType {
  Undefined = 0,
  /** 等於, lhs == rhs */
  Eq = 1,
  /** in list, lhs in rhs, rhs需要是一個List */
  In = 2,
  /** not in list, lhs not in rhs, rhs需要是一個List */
  NotIn = 3,
  /** 不等於, lhs != rhs */
  NotEq = 4,
  /** 大於, lhs > rhs */
  Gt = 5,
  /** 小於, lhs < rhs */
  Lt = 6,
  /** 大於等於, lhs >= rhs */
  Gte = 7,
  /** 小於等於, lhs <= rhs */
  Lte = 8,
  /** 爲空, lhs == nil */
  IsNull = 9,
  /** 不爲空, lhs != nil */
  IsNotNull = 10,
  /** 總是爲true */
  AlwaysTrue = 11,
}

export enum RuleStatus {
  Undefined = 0,
  Online = 1,
  Offline = 2,
}

/** SchemaType - 數據結構字段類型
 NEXT ID: 6 */
export enum SchemaType {
  Undefined = 0,
  Bool = 1,
  Int = 2,
  Double = 3,
  String = 4,
  Object = 5,
}

/** TargetIDSource 需要判定的目標值數據來源 */
export enum TargetIDSource {
  Undefined = 0,
  /** 約定爲traffic參數中的commonArgs.uid */
  Uid = 1,
}

export enum TargetOpType {
  Undefined = 0,
  In = 1,
  NotIn = 2,
}

/** TrafficResultType 返回的結果類型
 NEXT ID: 2 */
export enum TrafficResultType {
  Undefined = 0,
  ConstValue = 1,
}

/** Action - 執行動作定義
 NEXT ID: 3 */
export interface Action {
  actionType?: ActionType;
  constReturnAction?: ConstReturnAction;
}

/** AllowList
 NEXT ID: 3 */
export interface AllowList {
  /** 比較字段 */
  field?: GrayField;
  /** 比較字段值 */
  values?: Array<string>;
}

/** BizSchemaMeta - 描述某個業務線的數據信息
 NEXT ID: 3 */
export interface BizSchemaMeta {
  bizType?: BizType;
  schema?: Record<string, Schema>;
}

/** BlockList
 NEXT ID: 3 */
export interface BlockList {
  /** 比較字段 */
  field?: GrayField;
  /** 比較字段值 */
  values?: Array<string>;
}

/** ComboCondition 組合條件判斷 */
export interface ComboCondition {
  /** 組合類型 */
  comboType: ComboType;
  /** 組合條件 */
  conditions?: Array<Condition>;
}

/** CommonArgs 通用參數, 一般請求可能會有的通用參數, 如果有需要傳入
 NEXT ID: 5, 12 */
export interface CommonArgs {
  uid?: Int64;
  appID?: number;
  deviceID?: Int64;
  platform?: string;
  /** 指定key的參數 */
  params?: Record<string, string>;
  /** 額外的json參數 */
  extra?: string;
}

/** Condition 判斷條件
 NEXT ID: 7 */
export interface Condition {
  /** 判斷類型 */
  type?: ConditionType;
  /** conditionType 寫入對應字段
metainfo中的x-tt-env 等於 xxx */
  xTtEnv?: string;
  /** 顯示傳參version      等於 xxx */
  versionIdentifier?: string;
  /** 指定id列表進行in or not in的判斷 */
  targetList?: TargetList;
  /** 百分比灰度判斷 */
  grayConfig?: GrayConfig;
  /** 計算表達式書寫 */
  operatorExpr?: OperatorExpr;
  /** 組合條件 */
  comboCondition?: ComboCondition;
}

/** ConstExpr 常量表達式，會根據常量的類型返回對應的值
 NEXT ID: 3 */
export interface ConstExpr {
  valueType: ConstValueType;
  value?: ConstValue;
}

/** ConstReturnAction 常量返回類型
 NEXT ID: 4 */
export interface ConstReturnAction {
  key?: string;
  valueType?: ConstValueType;
  value?: ConstValue;
}

/** ConstValue 常量的實際值
 NEXT ID: 6 */
export interface ConstValue {
  boolValue?: boolean;
  stringValue?: string;
  intValue?: Int64;
  doubleValue?: number;
  stringListValue?: Array<string>;
}

/** DimensionMeta - 描述某個業務線的數據維度信息
 NEXT ID: 3 */
export interface DimensionMeta {
  bizType?: BizType;
  schema?: Schema;
}

/** Expr 描述了在條件判斷過程中執行的表達式
 根據exprType對應不同的表達式內容
 NEXT ID: 4 */
export interface Expr {
  /** 表達式類型 */
  exprType: ExprType;
  /** exprType爲ConstExpr時使用 */
  constExpr?: ConstExpr;
  /** exprType爲VarExpr時使用 */
  varExpr?: string;
}

/** GrayBucket 百分比灰度配置
 NEXT ID: 4 */
export interface GrayBucket {
  /** 灰度計算字段 */
  field?: GrayField;
  /** 灰度比例, 取[0, size]的大小 */
  inGray?: number;
  /** bucket 大小, 默認10000 */
  size?: number;
}

/** GrayConfig 灰度配置
 目前順序爲 BlockList -> AllowList -> Bucket的校驗順序
 NEXT ID: 4 */
export interface GrayConfig {
  /** 在blockList中的表示不命中 */
  blockList?: BlockList;
  /** 在allowList中的表示命中，未命中的走bucket */
  allowList?: AllowList;
  /** 百分比灰度配置 */
  bucket?: GrayBucket;
}

export interface GrayField {
  /** 灰度字段類型 */
  type: GrayFieldType;
  /** 自定義字段json path */
  customFieldPath?: string;
}

/** OperatorExpr 運算表達式
 例如: 對於運算操作 x > y, x是左參數lhs, y是右參數rhs
 NEXT ID: 4 */
export interface OperatorExpr {
  /** 條件類型 */
  operator: OperatorType;
  /** 運算操作的左側表達式 */
  lhs?: Expr;
  /** 運算操作的右側表達式 */
  rhs?: Expr;
}

/** Rule - 業務配置規則
 NEXT ID: 6 */
export interface Rule {
  ruleID?: Int64;
  /** 業務線 */
  bizType?: BizType;
  /** 規則配置的維度，會是根據schema的一個json object */
  dimension?: string;
  /** 判斷條件 */
  condition?: Condition;
  /** condition pass後的執行動作 */
  action?: Action;
  /** 業務自定義標籤，用於區分同一個bizType和dimension下不同場景的規則 */
  tag?: string;
  /** 規則狀態 */
  status?: RuleStatus;
  /** 操作人ID */
  operator?: string;
  /** 更新時間 */
  updateTime?: Int64;
  /** 創建時間 */
  createTime?: Int64;
  /** 優先級, 默認0, 同一dimension下, 數字越大優先級越高 */
  priority?: number;
}

/** Schema - 描述維度的數據結構
 NEXT ID: 7 */
export interface Schema {
  type?: SchemaType;
  /** 業務方註冊時可自定義名稱 */
  name?: string;
  children?: Array<Schema>;
  /** 對於dimension類型的 filePath要精確到葉子結點，其他類型的可以是Object級別的路徑 */
  fieldPath?: string;
  isDimension?: boolean;
  /** 是否必須字段，參與校驗 isDimension=true時 isRequired=true, isDimension=false時，isRequired按需 */
  isRequired?: boolean;
}

/** SystemArgs 流量參數
 NEXT ID: 2 */
export interface SystemArgs {
  /** 版本標識 */
  versionIdentifier?: string;
}

/** TargetList 根據op判斷targetIDSource是否包含在targetIDs中
 NEXT ID: 4 */
export interface TargetList {
  op?: TargetOpType;
  targetIDs?: Array<string>;
  targetIDSource?: TargetIDSource;
}

/** Traffic 流量信息
 NEXT ID: 5 */
export interface Traffic {
  bizType: BizType;
  /** 業務通用參數，是一個json object */
  dimension?: string;
  /** 通用流量參數 */
  commonArgs?: CommonArgs;
  /** 系統流量參數 */
  systemArgs?: SystemArgs;
}

/** TrafficResult 流量判斷結果
 NEXT ID: 4 */
export interface TrafficResult {
  hit?: boolean;
  resultType?: TrafficResultType;
  constValue?: TrafficResultConstValue;
}

/** TrafficResultConstValue 返回常量值
 NEXT ID: 3 */
export interface TrafficResultConstValue {
  valueType?: ConstValueType;
  value?: ConstValue;
}

/** TrafficV2 流量信息
 NEXT ID: 5 */
export interface TrafficV2 {
  bizType: BizType;
  /** 通用流量參數 */
  commonArgs?: CommonArgs;
  /** 系統流量參數 */
  systemArgs?: SystemArgs;
  /** 業務流量參數 json object */
  bizArgs?: string;
}
/* eslint-enable */
