/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
/* eslint-disable */
/* tslint:disable */
// @ts-nocheck

import * as flow_devops_evaluation_entity from './flow_devops_evaluation_entity';
import * as flow_devops_evaluation_object_callback from './flow_devops_evaluation_object_callback';
import * as flow_devops_evaluation_callback_common from './flow_devops_evaluation_callback_common';
import * as flow_devops_evaluation_evaluator_callback from './flow_devops_evaluation_evaluator_callback';
import * as flow_devops_evaluation_manual_annotation from './flow_devops_evaluation_manual_annotation';

export type Int64 = string | number;

/** 聚合方式 */
export enum AggregatorMode {
  Unknown = 0,
  /** 按照評測維度標籤聚合 */
  EvaluatorTag = 1,
}

/** 聚合器類型 */
export enum AggregatorType {
  Average = 1,
  Sum = 2,
  Max = 3,
  Min = 4,
  /** 使用double類型來表示百分比。例如50.5%設置爲0.505 */
  PassingRate = 5,
  ExcellentRate = 6,
  /** 人工選項打分，count 各選項並給出比例分佈 */
  Count = 7,
  Pct50 = 8,
  Pct90 = 9,
  Pct99 = 10,
}

export enum BatchTaskRetryMode {
  All = 1,
  Unsuccessful = 2,
}

export enum BitableStatus {
  Unknown = 0,
  /** 任務未開始 */
  Running = 1,
  /** 任務成功 */
  Success = 2,
  /** 任務失敗 */
  Failed = 3,
}

/** ChainTask模版類型 */
export enum ChainTaskTemplate {
  ChainTaskTemplate_Unknow = 0,
  ChainTaskTemplate_BotTemplate = 1,
}

/** 分析圖表的類型 */
export enum ChartType {
  Unknown = 0,
  /** 指標卡 */
  KPI = 1,
  /** 餅圖 */
  Pie = 2,
  /** 條形圖 */
  Bar = 3,
  /** 條形堆積圖 */
  StackedBar = 4,
  /** 雷達圖 */
  Radar = 5,
  /** 折線圖 */
  Line = 6,
}

export enum DataType {
  /** 默認，有小數的浮點數值類型 */
  Double = 0,
  JSON = 1,
}

/** 評估器資源 */
export enum EvaluateMode {
  /** 人工 */
  Manual = 0,
  /** 自動 */
  Auto = 1,
  /** 重置 */
  Reset = 2,
}

/** 關聯評估器 */
export enum EvaluateScope {
  /** data row 範圍 */
  Row = 0,
  /** 全case默認生效 */
  Case = 1,
}

export enum ExecutionPolicy {
  /** error 停止運行 */
  StopOnAnyError = 1,
  /** error 繼續執行後續任務 */
  ContinueOnAnyError = 2,
  /** 部分失敗繼續執行後續任務 */
  OnlyContinueOnPartialError = 3,
}

export enum ExportCSVSourceType {
  /** 後續可能遷移單報告爲服務端導出 */
  EvaluationTaskReport = 1,
  ContrastReport = 2,
}

export enum FilterField {
  Unknown = 0,
  /** 得分 */
  Score = 1,
  /** 數值 */
  Value = 2,
  /** 評測結果option value */
  OptionValue = 3,
  /** 標註 */
  Plaintext = 4,
  /** 數據集標籤 */
  DataSetTag = 5,
  /** 評測維度,對應於ruleID */
  RuleID = 6,
}

export enum FilterLogicOp {
  Unknown = 0,
  And = 1,
  Or = 2,
}

export enum FilterOperatorType {
  Unknown = 0,
  /** 等於 */
  Equal = 1,
  /** 不等於 */
  NotEqual = 2,
  /** 包含 */
  Contains = 3,
  /** 不包含 */
  NotContains = 4,
  /** 大於 */
  Greater = 5,
  /** 大於等於 */
  GreaterOrEqual = 6,
  /** 小於 */
  Less = 7,
  /** 小於等於 */
  LessOrEqual = 8,
  /** 空 */
  IsNull = 9,
  /** 非空 */
  IsNotNull = 10,
}

export enum FornaxAgentOpenAPIKey {
  Unknown = 0,
  Invoke = 1,
  Stream = 2,
}

export enum FornaxAgentTmplType {
  Unknown = 0,
  ChatBot = 1,
  OpenAPI = 2,
}

export enum GenAnnotationTaskCustomFilterLanguage {
  Unknown = 0,
  Golang = 1,
  Typescript = 2,
  Python = 3,
}

/** 分組方式 */
export enum GroupMode {
  Unknown = 0,
  /** 數據集標籤 */
  DataSetTag = 1,
  /** 按照option結果分組 */
  OptionResult = 2,
}

export enum ManualStatus {
  /** 不需要人工標註 */
  NoNeed = 0,
  /** 需要人工標註 */
  Need = 1,
}

export enum ModelResponseFormat {
  Text = 0,
  Markdown = 1,
  JSON = 2,
}

export enum ModelStyle {
  Custom = 0,
  Creative = 1,
  Balance = 2,
  Precise = 3,
}

/** 評估器資源 */
export enum PromptTemplateFormat {
  PromptTemplateFormat_FString = 0,
  PromptTemplateFormat_Jinja2 = 1,
}

export enum RetryMode {
  All = 1,
  /** 重試未成功的rowGroup */
  Unsuccessful = 2,
  /** 指定rowGroupID重試 */
  SpecifyRowGroup = 3,
}

export enum RowGroupRunState {
  Unknown = -1,
  /** 排隊中 */
  Queueing = 0,
  /** 執行中 */
  Processing = 1,
  /** 成功 */
  Success = 2,
  /** 失敗 */
  Fail = 3,
  /** 結果待評估 */
  Evaluating = 4,
  /** 終止執行 */
  Terminal = 5,
}

export enum RowRunState {
  /** 未開始執行 */
  Queueing = 0,
  /** 執行成功 */
  Success = 1,
  /** 執行失敗 */
  Fail = 2,
}

/** 表單展示元素類型 */
export enum ShowEntityType {
  /** 評測對象coze bot，對應使用 11:CozeEntityMap */
  CozeBot = 1,
  /** 評測對象prompt */
  Prompt = 2,
  /** 用戶信息 */
  User = 3,
  /** 註冊agent */
  Agent = 4,
}

/** SpecialObjectType 後面可單獨在 評估對象管理平臺上進行動態註冊，註冊的會動態分配 */
export enum SpecialObjectType {
  CozeBot = 0,
  Prompt = 1,
  ChainTask = 2,
  /** 接入 Fornax 的應用，Eino 框架默認集成 */
  FornaxApp = 3,
  /** CloudIDE 提供的 FornaxAgent */
  FornaxAgent = 4,
  PlaygroundCozeBot = 5,
  PlaygroundCozeBotV2 = 6,
  /** 結果集批量評測類型 */
  EvalResultDatasetCollection = 7,
  PlaygroundCozeModel = 8,
  CiciCrawl = 9,
  /** 自定義評測規則，idgen id 不可枚舉, 此 enum 僅用於搜索&過濾的 request */
  Custom = 100,
}

export enum TaskAggrReportGenStatus {
  /** 未生成，任務未執行完成 */
  NotGenerated = 0,
  /** 更新中 */
  Updating = 1,
  /** 運行時可查看報告詳情，完成 後展示整體得分和【查看聚合報告可點擊】 */
  Generated = 2,
  /** 完成後如果評分有更新，需要重新聚合計算 */
  NeedUpdate = 3,
}

export enum TaskManualStatus {
  NoNeed = 0,
  Need = 1,
  Completed = 2,
}

export enum TaskMode {
  Unknown = 0,
  /** 平臺手動運行Case */
  SubmitExec = 1,
  /** 在線評測場景 */
  OnlineSyncExec = 2,
}

export enum TaskStatus {
  /** 評測任務執行中，前端展示【運行中】 */
  Processing = 1,
  /** 評測任務創建中，初始話rowGroup狀態等操作，前端展示【創建中】 */
  Creating = 4,
  /** rowgroup持續評測並添加到任務，在線評測場景中使用 */
  Appending = 10,
  /** 執行完成且需要人工評分，前端展示【需要人工評分】 */
  NeedManualEval = 20,
  /** 用戶手動取消運行, 前端展示【已終止，用戶取消】 */
  Termination = 21,
  /** 系統主動終止任務，前端展示【已終止: 系統異常】 */
  SystemTermination = 22,
  /** 任務執行完成，前端展示【成功】 */
  Completed = 30,
  /** 執行完成，全部 rowGroup 都執行失敗，前端展示【失敗】 */
  Error = 31,
  /** 執行完成, 部分rowGroup失敗。前端展示【部分失敗】 */
  PartialFailure = 41,
  /** 任務已創建,等待任務被調度執行 */
  AwaitExecution = 42,
  /** 等待任務被重試 */
  AwaitRetry = 43,
}

export enum UserChangeMode {
  /** 無限制，用戶可讀寫、運行 */
  Default = 0,
  /** 不可編輯、不可觸發運行，可讀 */
  ReadOnly = 5,
}

export interface BizError {
  err_msg: string;
  err_code: Int64;
}

export interface ChainTask {
  task_id: string;
  task_name?: string;
  /** 評測時候，chainTask的版本，需要前端傳 */
  version?: number;
  model_info?: string;
  chain_task_template?: ChainTaskTemplate;
  prompt_template_format?: PromptTemplateFormat;
  app_id?: string;
}

export interface CiciCrawl {
  bot_id: string;
  name?: string;
  avatar_url?: string;
  crawl_project_id?: string;
}

export interface ColumnRuleInfo {
  rule_id: Int64;
  evaluator_type: Int64;
  /** 自定義評估器名稱 */
  evaluator_type_name: string;
  /** 規則名稱 */
  name?: string;
  /** 用於對話組粒度規則的合併單元格 */
  granularity?: flow_devops_evaluation_entity.EvaluatorGranularity;
}

export interface CozeAgent {
  AgentID: Int64;
  AgentName: string;
  ModelInfo?: flow_devops_evaluation_entity.ModelInfo;
}

/** 評測CozeBot */
export interface CozeBot {
  bot_id?: Int64;
  /** 默認0， 是draft版本
deprecated */
  is_draft?: number;
  /** 創建case version 爲空，task實體會攜帶當前case run 時候 bot version */
  version?: Int64;
  /** Bot類型，默認0， 是draft版本 */
  bot_info_type?: flow_devops_evaluation_object_callback.CozeBotInfoType;
  /** 創建case connector_id 爲空，task實體會攜帶當前case run 時候 bot connector_id */
  connector_id?: string;
  model_info?: flow_devops_evaluation_entity.ModelInfo;
  bot_name?: string;
  avatar_url?: string;
  env?: string;
  bot_version?: string;
  Agents?: Array<CozeAgent>;
}

export interface DashboardRow {
  /** 數據集結構 */
  row_id: Int64;
  /** 數據集cells（包含input, output, variable FIXME MultiCell上線後，廢棄 */
  cells: Array<string>;
  /** 評估報告新增
大模型真實輸出 FIXME  MultiOutput上線後廢棄 */
  output: Output;
  /** 評估器報告 */
  row_eval_cell: RowEvalCell;
  /** 二級詳情rule_group_id
deprecated 不爲0時表示該行包括了所有通用規則與行級規則的rule_group_id, */
  rule_group_id: Int64;
  /** 含多模態的輸出，兼容字段，全量上線後，廢棄Output */
  multi_output?: flow_devops_evaluation_object_callback.Output;
  /** 擴展2號字段，數據集多模態展示 */
  multi_cells?: Array<flow_devops_evaluation_callback_common.Content>;
  /** 軌跡信息 */
  trajectory?: flow_devops_evaluation_evaluator_callback.Trajectory;
  run_state?: RowRunState;
  /** deprecated */
  error_message?: string;
  /** Row執行時關聯的logID */
  log_id?: string;
  error?: RowRunError;
  /** 存在行級評估器時,行級評估器的group_id */
  row_rule_group_id?: Int64;
  /** 是否跳轉評估對象調用 trace */
  direct_object_trace?: boolean;
}

export interface DashboardRowGroup {
  row_group_id?: Int64;
  group_name?: string;
  rows: Array<DashboardRow>;
  run_state?: RowGroupRunState;
  tags?: Array<string>;
  /** rowGroup粒度評測規則ruleID -> 結果 */
  rule_eval_report_map?: Record<Int64, RowEvalReport>;
  serial_num?: number;
}

export interface EvalObject {
  /** 評測對象的類型。每一個 RPC 接口，視爲一種類型 */
  object_type: Int64;
  /** ObjectType=0 時，傳參此字段。 評測對象爲 CozeBot 時, 需要設置 CozeBot 信息 */
  coze_bot?: CozeBot;
  /** ObjectType=1 時，傳參此字段。 評測對象爲 EvalPrompt 時, 需要設置 Prompt 信息 */
  prompt?: EvalPrompt;
  /** ObjectType 爲其他時，傳參此字段 */
  object?: flow_devops_evaluation_object_callback.Object;
  /** ObjectType=2 時，傳參此字段。 評測對象爲 ChainTask 時, 需要設置 ChainTask 信息 */
  chain_task?: ChainTask;
  fornax_app_object?: FornaxAppObject;
  fornax_agent_object?: FornaxAgentObject;
  playground_coze_bot_v2?: PlaygroundCozeBotV2;
  /** EvalResultDatasetCollection 類型對象數據 */
  eval_result_dataset_collection?: EvalResultDatasetCollection;
  playground_coze_model?: PlaygroundCozeModel;
  cici_crawl?: CiciCrawl;
}

export interface EvalPrompt {
  /** 一個prompt的唯一標識 */
  prompt_id: string;
  /** 評測時候，prompt的版本，需要前端傳 */
  version?: string;
  name?: string;
}

export interface EvalResultDatasetCollection {
  items: Array<EvalResultDatasetObject>;
}

export interface EvalResultDatasetObject {
  dataset_id: Int64;
  rule_group_id: Int64;
  dataset_name?: string;
}

export interface EvaluateResult {
  /** 打分 */
  score?: number;
  /** 打分過程與結果相關信息 */
  reasoning?: string;
  /** 是否需要人工打分, 當前rule 沒有自動評測結果時候， ManualStatus = ManualStatus */
  manual_status?: ManualStatus;
  /** 評估器錯誤 */
  error?: RowRunError;
  data?: EvaluateResultData;
  /** Row 維度打分範圍，如 Coze 場景下由用戶 LLM Prompt 決定評估器輸出打分範圍 */
  scoring_scope?: flow_devops_evaluation_entity.ScoringScope;
}

export interface EvaluateResultData {
  score?: number;
  value?: string;
  option?: flow_devops_evaluation_entity.EvaluateResultOption;
  plain_text?: string;
  data_type?: flow_devops_evaluation_entity.EvaluateResultDataType;
  value_type?: flow_devops_evaluation_entity.EvaluateResultValueType;
}

export interface FornaxAgentAPI {
  open_api_key?: FornaxAgentOpenAPIKey;
}

export interface FornaxAgentObject {
  agent_id: Int64;
  faas_id: string;
  name?: string;
  avatar_url?: string;
  tmpl_type?: FornaxAgentTmplType;
  /** 評測的目標 api */
  api?: FornaxAgentAPI;
}

export interface FornaxAppObject {
  psm: string;
  env: string;
  cluster: string;
  region: string;
  app_id: string;
  client_id: string;
  /** for 二級搜索 */
  object?: flow_devops_evaluation_object_callback.Object;
}

export interface Output {
  prediction: string;
}

/** Coze2.0Bot */
export interface PlaygroundCozeBotV2 {
  bot_id?: Int64;
  /** 創建case version 爲空，task實體會攜帶當前case run 時候 bot version */
  bot_version?: string;
  /** Bot類型，默認0， 是draft版本 */
  bot_info_type?: flow_devops_evaluation_object_callback.CozeBotInfoType;
  model_info?: flow_devops_evaluation_entity.ModelInfo;
  bot_name?: string;
  avatar_url?: string;
}

/** Coze2.0 model */
export interface PlaygroundCozeModel {
  /** 模型id */
  model_id?: string;
  /** 溫度，模型輸出隨機性，值越大越隨機，越小越保守(0-1] */
  temperature?: number;
  /** 回覆最大Token數 */
  max_tokens?: number;
  /** 另一種模型的輸出隨機性，值越大越隨機[0,1] */
  top_p?: number;
  /** 生成時，採樣候選集的大小 */
  top_k?: number;
  /** 頻率懲罰，調整生成內容中的單詞頻率，正值單詞越少見[-1.0,1.0] */
  frequency_penalty?: number;
  /** 存在懲罰，調整生成內容中新詞語頻率，正值避免重複單詞，用新詞[-1.0,1.0] */
  presence_penalty?: number;
  /** 模型回覆內容格式 */
  response_format?: ModelResponseFormat;
  /** 模型名稱 */
  model_name?: string;
}

export interface RowEvalCell {
  /** 人工評分, 僅在 ManualStatus =  Completed 有效 */
  manual_result?: EvaluateResult;
  /** key:rule_id, 行級數據，單個規則的評測結果 */
  rule_eval_report_map?: Record<Int64, RowEvalReport>;
  token?: Int64;
  consuming?: Int64;
  create_time?: Int64;
  end_time?: Int64;
  space_id?: Int64;
  /** 該row所有自動評測rule或人工評分維度按權重聚合後的總分 */
  score?: number;
  rule_eval_reports?: Array<RowEvalReport>;
  row_metrics?: Array<RowEvalReport>;
  manual_annotation_reports?: Array<flow_devops_evaluation_manual_annotation.ManualAnnotationLabelTask>;
}

/** 每個評估器對應的評分 */
export interface RowEvalReport {
  /** TODO:後期需要轉爲真實的evaluatorName，先暫時用EvaluatorType表示一個評估器 */
  evaluator_type?: Int64;
  row_eval_result?: EvaluateResult;
  /** 評估器的名稱 */
  evaluator_type_name?: string;
  weight?: Int64;
  /** 如果是行級規則需要在單獨的列展示 */
  is_row_evaluator?: boolean;
  name?: string;
}

export interface RowRunError {
  code: Int64;
  message: string;
  /** for prompt platform */
  detail: string;
  BizError?: BizError;
}

export interface ScoringThreshold {
  /** 及格率閾值 */
  pass_threshold?: number;
  /** 優秀率閾值 */
  excellent_threshold?: number;
}

export interface Task {
  id?: Int64;
  status?: TaskStatus;
  dataset_id?: Int64;
  /** run case時候的評測對象實體，包含版本信息 */
  eval_object?: EvalObject;
  /** 運行的測數據行數 */
  row_run_cnt?: Int64;
  /** 任務整體開銷 */
  token?: Int64;
  /** 任務整體耗時 */
  consuming?: Int64;
  /** 任務開始執行時間 */
  start_time?: Int64;
  /** 任務執行完成時間 */
  end_time?: Int64;
  creator_id?: Int64;
  /** 執行本次任務的log_id */
  log_id?: string;
  /** 本次執行失敗的原因文案 */
  object_output_err?: string;
  /** 任務統計, RowGroup維度 */
  task_stats?: TaskStats;
  /** 任務人工評分統計, Row維度 */
  task_manual_stats?: TaskManualStats;
  /** 任務人工評分狀態 */
  task_manual_status?: TaskManualStatus;
  /** 聚合報告生成狀態 */
  aggr_report_gen_status?: TaskAggrReportGenStatus;
  score?: number;
  passing_rate?: number;
  excellent_rate?: number;
  /** 及格優秀閾值 */
  threshold?: ScoringThreshold;
  /** deprecated 評測對象整體 token消耗 */
  object_token_usage?: TokenUsage;
  /** 運行時參數，json序列化 */
  runtime_parameter?: string;
  /** 評測對象整體 token 消耗 */
  object_token_cost?: TokenUsage;
  /** 數據集名稱 */
  dataset_name?: string;
  /** 原始數據集ID */
  original_dataset_id?: Int64;
  /** 評估器整體 token 消耗 */
  evaluator_token_usage?: TokenUsage;
  credit_cost?: number;
  description?: string;
}

export interface TaskManualStats {
  needed_row_count?: Int64;
  completed_row_count?: Int64;
  /** 需要group粒度人工評分的對話組數 */
  needed_row_group_count?: Int64;
  /** 已完成group粒度人工評分的對話組數 */
  completed_row_group_count?: Int64;
}

export interface TaskStats {
  uncompleted_count?: Int64;
  success_count?: Int64;
  fail_count?: Int64;
  /** 最終執行成功的 row 數量 */
  success_row_count?: Int64;
  /** 最終執行失敗的 row 數量 */
  fail_row_count?: Int64;
  /** 執行過的 row 數量總和 */
  total_row_count?: Int64;
}

export interface TokenUsage {
  /** input token消耗 */
  input_token: Int64;
  /** output token消耗 */
  output_token: Int64;
}
/* eslint-enable */
